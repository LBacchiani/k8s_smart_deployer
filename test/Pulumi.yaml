name: my-k8s-app
runtime: yaml
resources:
  image-e85a94f6-b5e7-49d6-8e1a-aeb92acf0cf8:
    name: image-e85a94f6-b5e7-49d6-8e1a-aeb92acf0cf8
    type: kubernetes:core/v1:Pod
    properties:
      apiVersion: v1
      kind: Pod
      metadata:
        name: image-0-${pulumi.stack}
        labels:
          app: image
      spec:
        nodeName: k3d-k3s-default-agent-0
        containers:
        - name: image
          image: giovaz94/tea-store-general
          imagePullPolicy: Always
          ports:
          - containerPort: 8002
          resources:
            requests:
              cpu: 10m
              memory: 10M
          env:
          - name: MCL
            value: '190'
          - name: SERVICE_NAME
            value: image
          - name: PORT
            value: '8002'
          - name: OUTPUT_SERVICES
            value: '{"http://persistence-service:8003/request":"1"}'
    options: {}
  image-6bf72b0c-7041-4ace-a40c-2df04311cb83:
    name: image-6bf72b0c-7041-4ace-a40c-2df04311cb83
    type: kubernetes:core/v1:Pod
    properties:
      apiVersion: v1
      kind: Pod
      metadata:
        name: image-1-${pulumi.stack}
        labels:
          app: image
      spec:
        nodeName: k3d-k3s-default-agent-0
        containers:
        - name: image
          image: giovaz94/tea-store-general
          imagePullPolicy: Always
          ports:
          - containerPort: 8002
          resources:
            requests:
              cpu: 10m
              memory: 10M
          env:
          - name: MCL
            value: '190'
          - name: SERVICE_NAME
            value: image
          - name: PORT
            value: '8002'
          - name: OUTPUT_SERVICES
            value: '{"http://persistence-service:8003/request":"1"}'
    options: {}
  recommender-8510679f-9a04-4631-8c56-659ff1a68ad7:
    name: recommender-8510679f-9a04-4631-8c56-659ff1a68ad7
    type: kubernetes:core/v1:Pod
    properties:
      apiVersion: v1
      kind: Pod
      metadata:
        name: recommender-0-${pulumi.stack}
        labels:
          app: recommender
      spec:
        nodeName: k3d-k3s-default-agent-0
        containers:
        - name: recommender
          image: giovaz94/tea-store-general
          imagePullPolicy: Always
          ports:
          - containerPort: 8005
          resources:
            requests:
              cpu: 10m
              memory: 10M
          env:
          - name: MCL
            value: '190'
          - name: SERVICE_NAME
            value: recommender
          - name: PORT
            value: '8005'
    options: {}
  persistence-a7da0787-264f-4f40-a9f1-3fba430198a7:
    name: persistence-a7da0787-264f-4f40-a9f1-3fba430198a7
    type: kubernetes:core/v1:Pod
    properties:
      apiVersion: v1
      kind: Pod
      metadata:
        name: persistence-0-${pulumi.stack}
        labels:
          app: persistence
      spec:
        nodeName: k3d-k3s-default-agent-0
        containers:
        - name: persistence
          image: giovaz94/tea-store-general
          imagePullPolicy: Always
          ports:
          - containerPort: 8003
          resources:
            requests:
              cpu: 10m
              memory: 10M
          env:
          - name: MCL
            value: '190'
          - name: SERVICE_NAME
            value: persistence
          - name: PORT
            value: '8003'
    options: {}
  recommender-service-6d0eefaa-d254-43b2-9298-df8c372dbe0f:
    name: recommender-service-6d0eefaa-d254-43b2-9298-df8c372dbe0f
    type: kubernetes:core/v1:Service
    properties:
      apiVersion: v1
      kind: Service
      metadata:
        name: recommender-service
      spec:
        selector:
          app: recommender
          type: recommender-service
        ports:
        - protocol: TCP
          port: 8005
          targetPort: 8005
    options:
      dependsOn:
      - ${recommender-8510679f-9a04-4631-8c56-659ff1a68ad7}
  image-service-9227b289-ab05-485a-a1f5-a3a255763d5c:
    name: image-service-9227b289-ab05-485a-a1f5-a3a255763d5c
    type: kubernetes:core/v1:Service
    properties:
      apiVersion: v1
      kind: Service
      metadata:
        name: image-service
      spec:
        selector:
          app: image
          type: image-service
        ports:
        - protocol: TCP
          port: 8004
          targetPort: 8004
    options:
      dependsOn:
      - ${image-e85a94f6-b5e7-49d6-8e1a-aeb92acf0cf8}
      - ${image-6bf72b0c-7041-4ace-a40c-2df04311cb83}
  persistence-service-1683df31-01ca-4ce0-88c9-ba2ad6da1d46:
    name: persistence-service-1683df31-01ca-4ce0-88c9-ba2ad6da1d46
    type: kubernetes:core/v1:Service
    properties:
      apiVersion: v1
      kind: Service
      metadata:
        name: persistence-service
      spec:
        selector:
          app: persistence
          type: persistence-service
        ports:
        - protocol: TCP
          port: 8003
          targetPort: 8003
    options:
      dependsOn:
      - ${persistence-a7da0787-264f-4f40-a9f1-3fba430198a7}
  auth-88defd1e-3c44-4931-b2ef-7ab5ac9757de:
    name: auth-88defd1e-3c44-4931-b2ef-7ab5ac9757de
    type: kubernetes:core/v1:Pod
    properties:
      apiVersion: v1
      kind: Pod
      metadata:
        name: auth-0-${pulumi.stack}
        labels:
          app: auth
      spec:
        nodeName: k3d-k3s-default-agent-0
        containers:
        - name: auth
          image: giovaz94/tea-store-general
          imagePullPolicy: Always
          ports:
          - containerPort: 8002
          resources:
            requests:
              cpu: 10m
              memory: 10M
          env:
          - name: MCL
            value: '190'
          - name: SERVICE_NAME
            value: auth
          - name: PORT
            value: '8002'
          - name: OUTPUT_SERVICES
            value: '{"http://persistence-service:8003/request":"1"}'
          - name: DEP1
            value: persistence-service-1683df31-01ca-4ce0-88c9-ba2ad6da1d46
    options:
      dependsOn:
      - ${persistence-service-1683df31-01ca-4ce0-88c9-ba2ad6da1d46}
  auth-service-724f2e21-f043-4776-80ea-7a28cc6acdd2:
    name: auth-service-724f2e21-f043-4776-80ea-7a28cc6acdd2
    type: kubernetes:core/v1:Service
    properties:
      apiVersion: v1
      kind: Service
      metadata:
        name: auth-service
      spec:
        selector:
          app: auth
          type: auth-service
        ports:
        - protocol: TCP
          port: 8002
          targetPort: 8002
    options:
      dependsOn:
      - ${auth-88defd1e-3c44-4931-b2ef-7ab5ac9757de}
  webui-eff0ca13-1dc0-4c70-9dd2-4530a862d3df:
    name: webui-eff0ca13-1dc0-4c70-9dd2-4530a862d3df
    type: kubernetes:core/v1:Pod
    properties:
      apiVersion: v1
      kind: Pod
      metadata:
        name: webui-0-${pulumi.stack}
        labels:
          app: webui
      spec:
        nodeName: k3d-k3s-default-agent-0
        containers:
        - name: webui
          image: giovaz94/tea-store-general
          imagePullPolicy: Always
          ports:
          - containerPort: 8001
          resources:
            requests:
              cpu: 10m
              memory: 10M
          env:
          - name: MCL
            value: '150'
          - name: SERVICE_NAME
            value: webUI
          - name: PORT
            value: '8001'
          - name: OUTPUT_SERVICES
            value: '{"http://recommender-service:8005/request":"1","http://image-service:8004/request":"2","http://persistence-service:8003/request":"1","http://auth-service:8002/request":"1"}'
          - name: DEP1
            value: image-service-9227b289-ab05-485a-a1f5-a3a255763d5c
          - name: DEP2
            value: persistence-service-1683df31-01ca-4ce0-88c9-ba2ad6da1d46
          - name: DEP3
            value: auth-service-724f2e21-f043-4776-80ea-7a28cc6acdd2
          - name: DEP4
            value: recommender-service-6d0eefaa-d254-43b2-9298-df8c372dbe0f
    options:
      dependsOn:
      - ${image-service-9227b289-ab05-485a-a1f5-a3a255763d5c}
      - ${persistence-service-1683df31-01ca-4ce0-88c9-ba2ad6da1d46}
      - ${auth-service-724f2e21-f043-4776-80ea-7a28cc6acdd2}
      - ${recommender-service-6d0eefaa-d254-43b2-9298-df8c372dbe0f}
  webui-service-3d0477a8-0c23-46ef-bb51-b1d90fd323b6:
    name: webui-service-3d0477a8-0c23-46ef-bb51-b1d90fd323b6
    type: kubernetes:core/v1:Service
    properties:
      apiVersion: v1
      kind: Service
      metadata:
        name: webui-service
      spec:
        type: NodePort
        selector:
          app: webui
        ports:
        - protocol: TCP
          port: 8001
          targetPort: 8001
          nodePort: 30001
    options:
      dependsOn:
      - ${webui-eff0ca13-1dc0-4c70-9dd2-4530a862d3df}
